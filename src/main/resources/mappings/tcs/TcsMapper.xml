<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zgiot.app.server.module.tcs.mapper.TcsMapper">


    <select id="getRecordsMatchCondition" resultType="com.zgiot.common.pojo.CoalAnalysisRecord">
        select id,time,target,sample,aad,mt,stad,qnetar,system,avg_density,avg_flow from tb_coal_analysis
        WHERE
        <trim prefix="" prefixOverrides="and">
        <if test="startTime != null">
            and time &gt; #{startTime}
        </if>
        <if test="endTime !=null">
            and time &lt; #{endTime}
        </if>
        <if test="targetList != null">
            and target in
            <foreach collection="targetList" item="target" open="(" close=")" separator=",">
                 #{target}
            </foreach>
        </if>
        <if test="sample != null">
            and sample = #{sample}
        </if>
        <if test="system != null">
            and system = #{system}
        </if>
        </trim>

        <if test="sortType == 0">
            ORDER BY time ASC
        </if>
        <if test="sortType == 1">
            ORDER BY time DESC
        </if>
        <if test="offset != null and count != null">
            limit #{offset},#{count}
        </if>

    </select>

    <select id="getDensityAndFlowInfo" resultType="com.zgiot.common.pojo.DensityAndFlowInfo">
        select thing_code,density,flow FROM tb_coal_analysis_density_flow_value WHERE analysis_id = #{param1}
    </select>


</mapper>